{"ast":null,"code":"import { PlaneGeometry, ShaderMaterial, Uniform, Mesh, PerspectiveCamera, Scene, WebGLRenderer, CanvasTexture, SRGBColorSpace } from 'three';\nlet _renderer;\nlet fullscreenQuadGeometry;\nlet fullscreenQuadMaterial;\nlet fullscreenQuad;\nexport function decompress(texture, maxTextureSize = Infinity, renderer = null) {\n  if (!fullscreenQuadGeometry) fullscreenQuadGeometry = new PlaneGeometry(2, 2, 1, 1);\n  if (!fullscreenQuadMaterial) fullscreenQuadMaterial = new ShaderMaterial({\n    uniforms: {\n      blitTexture: new Uniform(texture)\n    },\n    vertexShader: `\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(){\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position.xy * 1.0,0.,.999999);\n\t\t\t}`,\n    fragmentShader: `\n\t\t\tuniform sampler2D blitTexture; \n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(){ \n\t\t\t\tgl_FragColor = vec4(vUv.xy, 0, 1);\n\t\t\t\t\n\t\t\t\t#ifdef IS_SRGB\n\t\t\t\tgl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n\t\t\t\t#else\n\t\t\t\tgl_FragColor = texture2D( blitTexture, vUv);\n\t\t\t\t#endif\n\t\t\t}`\n  });\n  fullscreenQuadMaterial.uniforms.blitTexture.value = texture;\n  fullscreenQuadMaterial.defines.IS_SRGB = texture.colorSpace == SRGBColorSpace;\n  fullscreenQuadMaterial.needsUpdate = true;\n  if (!fullscreenQuad) {\n    fullscreenQuad = new Mesh(fullscreenQuadGeometry, fullscreenQuadMaterial);\n    fullscreenQuad.frustumCulled = false;\n  }\n  const _camera = new PerspectiveCamera();\n  const _scene = new Scene();\n  _scene.add(fullscreenQuad);\n  if (renderer === null) {\n    renderer = _renderer = new WebGLRenderer({\n      antialias: false\n    });\n  }\n  const width = Math.min(texture.image.width, maxTextureSize);\n  const height = Math.min(texture.image.height, maxTextureSize);\n  renderer.setSize(width, height);\n  renderer.clear();\n  renderer.render(_scene, _camera);\n  const canvas = document.createElement('canvas');\n  const context = canvas.getContext('2d');\n  canvas.width = width;\n  canvas.height = height;\n  context.drawImage(renderer.domElement, 0, 0, width, height);\n  const readableTexture = new CanvasTexture(canvas);\n  readableTexture.minFilter = texture.minFilter;\n  readableTexture.magFilter = texture.magFilter;\n  readableTexture.wrapS = texture.wrapS;\n  readableTexture.wrapT = texture.wrapT;\n  readableTexture.name = texture.name;\n  if (_renderer) {\n    _renderer.forceContextLoss();\n    _renderer.dispose();\n    _renderer = null;\n  }\n  return readableTexture;\n}","map":{"version":3,"names":["PlaneGeometry","ShaderMaterial","Uniform","Mesh","PerspectiveCamera","Scene","WebGLRenderer","CanvasTexture","SRGBColorSpace","_renderer","fullscreenQuadGeometry","fullscreenQuadMaterial","fullscreenQuad","decompress","texture","maxTextureSize","Infinity","renderer","uniforms","blitTexture","vertexShader","fragmentShader","value","defines","IS_SRGB","colorSpace","needsUpdate","frustumCulled","_camera","_scene","add","antialias","width","Math","min","image","height","setSize","clear","render","canvas","document","createElement","context","getContext","drawImage","domElement","readableTexture","minFilter","magFilter","wrapS","wrapT","name","forceContextLoss","dispose"],"sources":["/Users/leandrodisconzi/CascadeProjects/geodome-website/node_modules/three/examples/jsm/utils/TextureUtils.js"],"sourcesContent":["import {\n\tPlaneGeometry,\n\tShaderMaterial,\n\tUniform,\n\tMesh,\n\tPerspectiveCamera,\n\tScene,\n\tWebGLRenderer,\n\tCanvasTexture,\n\tSRGBColorSpace\n} from 'three';\n\nlet _renderer;\nlet fullscreenQuadGeometry;\nlet fullscreenQuadMaterial;\nlet fullscreenQuad;\n\nexport function decompress( texture, maxTextureSize = Infinity, renderer = null ) {\n\n\tif ( ! fullscreenQuadGeometry ) fullscreenQuadGeometry = new PlaneGeometry( 2, 2, 1, 1 );\n\tif ( ! fullscreenQuadMaterial ) fullscreenQuadMaterial = new ShaderMaterial( {\n\t\tuniforms: { blitTexture: new Uniform( texture ) },\n\t\tvertexShader: `\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(){\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position.xy * 1.0,0.,.999999);\n\t\t\t}`,\n\t\tfragmentShader: `\n\t\t\tuniform sampler2D blitTexture; \n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(){ \n\t\t\t\tgl_FragColor = vec4(vUv.xy, 0, 1);\n\t\t\t\t\n\t\t\t\t#ifdef IS_SRGB\n\t\t\t\tgl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n\t\t\t\t#else\n\t\t\t\tgl_FragColor = texture2D( blitTexture, vUv);\n\t\t\t\t#endif\n\t\t\t}`\n\t} );\n\n\tfullscreenQuadMaterial.uniforms.blitTexture.value = texture;\n\tfullscreenQuadMaterial.defines.IS_SRGB = texture.colorSpace == SRGBColorSpace;\n\tfullscreenQuadMaterial.needsUpdate = true;\n\n\tif ( ! fullscreenQuad ) {\n\n\t\tfullscreenQuad = new Mesh( fullscreenQuadGeometry, fullscreenQuadMaterial );\n\t\tfullscreenQuad.frustumCulled = false;\n\n\t}\n\n\tconst _camera = new PerspectiveCamera();\n\tconst _scene = new Scene();\n\t_scene.add( fullscreenQuad );\n\n\tif ( renderer === null ) {\n\n\t\trenderer = _renderer = new WebGLRenderer( { antialias: false } );\n\n\t}\n\n\tconst width = Math.min( texture.image.width, maxTextureSize );\n\tconst height = Math.min( texture.image.height, maxTextureSize );\n\n\trenderer.setSize( width, height );\n\trenderer.clear();\n\trenderer.render( _scene, _camera );\n\n\tconst canvas = document.createElement( 'canvas' );\n\tconst context = canvas.getContext( '2d' );\n\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tcontext.drawImage( renderer.domElement, 0, 0, width, height );\n\n\tconst readableTexture = new CanvasTexture( canvas );\n\n\treadableTexture.minFilter = texture.minFilter;\n\treadableTexture.magFilter = texture.magFilter;\n\treadableTexture.wrapS = texture.wrapS;\n\treadableTexture.wrapT = texture.wrapT;\n\treadableTexture.name = texture.name;\n\n\tif ( _renderer ) {\n\n\t\t_renderer.forceContextLoss();\n\t\t_renderer.dispose();\n\t\t_renderer = null;\n\n\t}\n\n\treturn readableTexture;\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}